/**
 * critical.css - Inline critical styles for above-the-fold content
 * Combines reset, variables, and essential globe container styles
 * This file is inlined in HTML head to avoid render-blocking requests
 */

/* ===== CSS RESET ===== */
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

body {
  margin: 0;
  padding: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  font-size: 16px;
  line-height: 1.6;
  overflow: hidden;
}

/* ===== CSS VARIABLES (THEME) ===== */
:root {
  /* === PRIMARY / ZEN COLORS === */
  --primary: #40c4ff;
  --primary-hover: #64d8ff;
  --primary-rgb: 64, 196, 255;
  --zen-deep-navy: #010a1f;
  --zen-dark-blue: #001c52;
  --zen-blue: #0d426f;
  --zen-cyan: #40c4ff;
  --zen-light-cyan: #e1f8ff;
  --zen-gradient: linear-gradient(140deg, #010a1f 0%, #001c52 55%, #0d426f 100%);
  --zen-gradient-soft: linear-gradient(140deg, rgba(1, 10, 31, 0.9) 0%, rgba(0, 28, 82, 0.85) 55%, rgba(13, 66, 111, 0.8) 100%);
  --zen-glow: 0 10px 30px rgba(64, 196, 255, 0.35);
  --zen-focus: 0 0 0 3px rgba(64, 196, 255, 0.45);

  /* === LIGHT MODE (DEFAULT) === */
  --bg-primary: #f7fbfd;
  --bg-secondary: #eef5f9;
  --bg-tertiary: #e0ecf3;
  --text-primary: #0d1f2d;
  --text-secondary: #2a5a7f;
  --text-muted: #5a8aac;
  --border-color: rgba(64, 196, 255, 0.15);
  --border-strong: rgba(64, 196, 255, 0.28);
  --shadow-light: rgba(1, 10, 31, 0.08);
  --shadow-medium: rgba(1, 10, 31, 0.2);

  /* === NARRATIVE/EXPLORER BAR SPECIFIC === */
  --hero-overlay-bg: linear-gradient(140deg, rgba(1, 10, 31, 0.85) 0%, rgba(0, 28, 82, 0.82) 50%, rgba(13, 66, 111, 0.88) 100%);
  --hero-text-color: #e1f8ff;
  --hero-meta-color: rgba(100, 216, 255, 0.92);
  --hero-label-color: rgba(64, 196, 255, 0.9);
  --progress-bar-bg: rgba(64, 196, 255, 0.15);
  --progress-bar-fill: linear-gradient(90deg, #40c4ff 0%, #64d8ff 50%, #00a8cc 100%);
  --progress-dot-inactive: rgba(64, 196, 255, 0.35);
  --progress-dot-active: rgba(225, 248, 255, 0.92);

  /* === SIDEBAR/RIGHT PANEL === */
  --sidebar-bg: var(--bg-primary);
  --panel-top-background: rgba(255, 255, 255, 0.72);
  --panel-clear-background: rgba(255, 255, 255, 0.86);
  --panel-clear-background-hover: rgba(255, 255, 255, 0.95);
  --panel-clear-border: var(--border-color);
  --detail-close-background: rgba(255, 255, 255, 0.1);
  --detail-close-color: var(--text-primary);
  --detail-close-background-hover: rgba(255, 255, 255, 0.25);
  --detail-back-background: rgba(255, 255, 255, 0.2);
  --detail-back-background-hover: rgba(255, 255, 255, 0.35);
  --detail-image-placeholder-bg: rgba(64, 196, 255, 0.12);
  --detail-meta-background: rgba(64, 196, 255, 0.08);
  --badge-theme-bg: rgba(64, 196, 255, 0.12);
  --badge-theme-text: var(--text-primary);
  --badge-theme-border: rgba(64, 196, 255, 0.35);
  --badge-theme-bg-hover: rgba(64, 196, 255, 0.22);

  /* === TOOLBAR/GLOBE === */
  --toolbar-background: rgba(247, 251, 253, 0.92);
  --toolbar-border: rgba(64, 196, 255, 0.2);
  --toolbar-text: var(--text-primary);
  --toolbar-text-muted: rgba(42, 90, 127, 0.75);

  /* === TRANSITIONS === */
  --transition-fast: 150ms ease;
  --transition-smooth: 320ms ease;
  --transition-focus: 200ms ease;
  --sidebar-transition: 300ms ease;

  /* === SHADOWS === */
  --shadow-card: 0 16px 38px rgba(1, 10, 31, 0.12);
  --layout-sidebar-width: 360px;

  /* === GLOBE INTRO OVERLAY === */
  --intro-overlay-gradient: linear-gradient(140deg, rgba(1, 10, 31, 0.85) 0%, rgba(0, 28, 82, 0.82) 50%, rgba(13, 66, 111, 0.88) 100%);
  --intro-text-color: #e1f8ff;
  --intro-muted-color: rgba(100, 216, 255, 0.92);
  --intro-button-background: linear-gradient(120deg, #40c4ff 0%, #64d8ff 40%, #00a8cc 100%);
  --intro-button-text: #ffffff;
  --intro-button-shadow: 0 12px 28px rgba(64, 196, 255, 0.35);
  --intro-button-shadow-strong: 0 18px 44px rgba(64, 196, 255, 0.45);
  --intro-skip-background: rgba(225, 248, 255, 0.12);
  --intro-skip-border: rgba(64, 196, 255, 0.32);

  --primary-focus: rgba(64, 196, 255, 0.45);

  /* === NARRATIVE OVERLAY === */
  --narrative-overlay-gradient: linear-gradient(140deg, rgba(1, 10, 31, 0.82) 0%, rgba(0, 28, 82, 0.76) 48%, rgba(13, 66, 111, 0.85) 100%);

  /* === BORDERS === */
  --border-soft: rgba(64, 196, 255, 0.18);
}

@media (prefers-color-scheme: dark) {
  :root {
    /* Dark mode backgrounds */
    --bg-primary: #0a1628;
    --bg-secondary: #0f1f33;
    --bg-tertiary: #142a42;
    --text-primary: #e1f8ff;
    --text-secondary: #a0d4f7;
    --text-muted: #6db3d9;
    --border-color: rgba(64, 196, 255, 0.16);
    --border-strong: rgba(64, 196, 255, 0.28);
    --shadow-light: rgba(0, 0, 0, 0.3);
    --shadow-medium: rgba(0, 0, 0, 0.5);

    /* Dark mode narrative/explorer bar */
    --hero-overlay-bg: linear-gradient(140deg, rgba(1, 10, 31, 0.92) 0%, rgba(0, 28, 82, 0.88) 50%, rgba(13, 66, 111, 0.92) 100%);
    --hero-text-color: #e1f8ff;
    --hero-meta-color: rgba(100, 216, 255, 0.92);
    --hero-label-color: rgba(64, 196, 255, 0.9);
    --progress-bar-bg: rgba(64, 196, 255, 0.16);
    --progress-bar-fill: linear-gradient(90deg, #40c4ff 0%, #64d8ff 50%, #00a8cc 100%);
    --progress-dot-inactive: rgba(64, 196, 255, 0.35);
    --progress-dot-active: rgba(225, 248, 255, 0.95);

    /* Dark mode sidebar */
    --sidebar-bg: rgba(10, 18, 30, 0.96);
    --panel-top-background: rgba(13, 23, 38, 0.85);
    --panel-clear-background: rgba(15, 26, 42, 0.9);
    --panel-clear-background-hover: rgba(20, 35, 55, 0.92);
    --panel-clear-border: var(--border-color);
    --detail-close-background: rgba(255, 255, 255, 0.06);
    --detail-close-color: var(--text-primary);
    --detail-close-background-hover: rgba(255, 255, 255, 0.12);
    --detail-back-background: rgba(64, 196, 255, 0.12);
    --detail-back-background-hover: rgba(64, 196, 255, 0.22);
    --detail-image-placeholder-bg: rgba(64, 196, 255, 0.15);
    --detail-meta-background: rgba(64, 196, 255, 0.18);
    --badge-theme-bg: rgba(64, 196, 255, 0.15);
    --badge-theme-text: #e1f8ff;
    --badge-theme-border: rgba(64, 196, 255, 0.38);
    --badge-theme-bg-hover: rgba(64, 196, 255, 0.28);

    /* Dark mode toolbar */
    --toolbar-background: rgba(10, 18, 30, 0.88);
    --toolbar-border: rgba(64, 196, 255, 0.25);
    --toolbar-text: #e1f8ff;
    --toolbar-text-muted: rgba(100, 216, 255, 0.85);

    /* Dark mode intro overlay */
    --intro-overlay-gradient: linear-gradient(135deg, rgba(1, 10, 31, 0.92) 0%, rgba(0, 28, 82, 0.9) 48%, rgba(13, 66, 111, 0.94) 100%);
    --intro-button-shadow: 0 16px 36px rgba(64, 196, 255, 0.35);
    --intro-button-shadow-strong: 0 22px 48px rgba(64, 196, 255, 0.45);
    --intro-skip-background: rgba(255, 255, 255, 0.12);
    --intro-skip-border: rgba(255, 255, 255, 0.22);

    /* Dark mode narrative overlay */
    --narrative-overlay-gradient: linear-gradient(135deg, rgba(1, 10, 31, 0.88) 0%, rgba(0, 28, 82, 0.8) 48%, rgba(13, 66, 111, 0.9) 100%);
  }
}

/* ===== LAYOUT ===== */
#root {
  position: fixed;
  inset: 0;
  display: flex;
  flex-direction: row;
  overflow: hidden;
}

.app-container {
  display: flex;
  flex-direction: row;
  height: 100vh;
  width: 100vw;
  overflow: hidden;
  position: relative;
}

.app-container > * {
  height: 100vh;
}

.app-container > .globe-container {
  flex: 1;
  min-width: 0;
}

.app-container > .right-panel {
  position: absolute;
  top: 0;
  right: 0;
  height: 100vh;
}

.visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.sidebar-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 200;
  opacity: 0;
  pointer-events: none;
  transition: opacity 300ms ease;
}

.sidebar-overlay.visible {
  opacity: 1;
  pointer-events: auto;
}

/* ===== LOADING SKELETON ===== */
.loading-skeleton {
  position: fixed;
  inset: 0;
  background: linear-gradient(135deg, #05030c 0%, #0a0515 50%, #050a15 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  animation: fadeIn 0.3s ease;
}

.loading-content {
  text-align: center;
  color: #ffffff;
}

.loading-spinner {
  width: 48px;
  height: 48px;
  border: 4px solid rgba(64, 196, 255, 0.2);
  border-top-color: #40c4ff;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: 0 auto 1.5rem;
}

.loading-text {
  font-size: 1.1rem;
  font-weight: 500;
  color: rgba(255, 255, 255, 0.9);
  margin-bottom: 0.5rem;
}

.loading-subtext {
  font-size: 0.9rem;
  color: rgba(255, 255, 255, 0.6);
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}


/* ===== GLOBE CONTAINER (CRITICAL) ===== */
.globe-container {
  flex: 1 1 auto;
  min-width: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: relative;
  contain: layout style paint;
}

@media (max-width: 768px) {
  .sidebar-overlay {
    display: block;
  }
}
